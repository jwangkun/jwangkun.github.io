<!DOCTYPE html>
<html>
  <head>
      <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta content="yes" name="apple-mobile-web-app-capable" />
  <meta content="black" name="apple-mobile-web-app-status-bar-style" />
  <meta name="referrer" content="never">
  <meta name="keywords" content="">
  <meta name="description" content="">
  <meta name="author" content="kveln">
  <title>Git flow 规范 | John Wong&#39;s Blog</title>
  <link href="https://cdn.bootcss.com/twitter-bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet">
  <!-- <link href="https://jwangkun.github.io/media/css/bootstrap.min.css" rel="stylesheet"> -->
  <!--  <link href="https://jwangkun.github.io/media/css/all.min.css" rel="stylesheet" type="text/css"> -->
  <link href="https://cdn.bootcss.com/font-awesome/5.11.2/css/all.min.css" rel="stylesheet">
  <link href='https://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
  <link href='https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>
  <link rel="alternate" type="application/rss+xml" title="Git flow 规范 | John Wong&#39;s Blog » Feed" href="https://jwangkun.github.io/atom.xml">
  <link rel="stylesheet"href="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@9.15.10/build/styles/androidstudio.min.css">
  <link href="https://jwangkun.github.io/styles/main.css" rel="stylesheet">
  <script src="https://cdn.bootcss.com/jquery/3.4.1/jquery.min.js"></script>
  <script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@9.15.10/build/highlight.min.js"></script>
  <!-- <script src="https://jwangkun.github.io/media/scripts/jquery.min.js"></script> -->
  <script>hljs.initHighlightingOnLoad();</script>
  

    <meta property="og:description" content="Git flow 规范"/>
    <meta property="og:url" content="https://jwangkun.github.io/3Me5sxE_I/"/>
    <meta property="og:locale" content="zh-CN"/>
    <meta property="og:type" content="website"/>
    <meta property="og:site_name" content="John Wong&#39;s Blog"/>
  </head>
  <body>
  	<!-- Navigation -->
  <nav class="navbar navbar-expand-lg navbar-light fixed-top" id="mainNav">
    <div class="container">
      <a class="navbar-brand" href="https://jwangkun.github.io">John Wong&#39;s Blog</a>
      <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
        Menu
        <i class="fas fa-bars"></i>
      </button>
      <div class="collapse navbar-collapse" id="navbarResponsive">
        <ul class="navbar-nav ml-auto">
          
          <li class="nav-item">
              
              <a class="nav-link" href="/">首页</a>
              
          </li>
          
          <li class="nav-item">
              
              <a class="nav-link" href="/archives">归档</a>
              
          </li>
          
          <li class="nav-item">
              
              <a class="nav-link" href="/tags">标签</a>
              
          </li>
          
          <li class="nav-item">
              
              <a class="nav-link" href="/about">关于</a>
              
          </li>
          
        </ul>
      </div>
    </div>
  </nav>
  <!-- Page Header -->
  <header class="masthead" style="background-image: url('https://jwangkun.github.io/media/images/home-bg.jpg')">
    <div class="overlay"></div>
    <div class="container">
      <div class="row">
        <div class="col-lg-8 col-md-10 mx-auto">
          <div class="post-heading">
          	<span class="tags">
          	 
            <a href="https://jwangkun.github.io/H0YOCYFRJ/" class="tag">Git</a>
            
        </span>
            <h1>Git flow 规范</h1>
            <span class="meta">
            	Posted on
              2020-11-21，7 min read
            </span>
          </div>
        </div>
      </div>
    </div>
  </header>

  <!-- Post Content -->
  <article>
    <div class="container">
      <div class="row">
        <div class="col-lg-8 col-md-10 mx-auto">
          <p>VV采用标准的Git flow，下面将从工作流图与抽象模型两个方面，来描述与规范 Git flow。</p>
<p>并在此基础上给出vv 的 master分支，hotfix-分支，develop分支，release-分支，feat-分支和bugfix-分支的定义与上下文。</p>
<p><strong>工作流图</strong></p>
<p>1 永久分支：Master分支与Develop分支</p>
<figure data-type="image" tabindex="1"><img src="https://pic3.zhimg.com/80/v2-15df7f43ff9ac14a43b04984eb2069da_720w.jpg" alt="img" loading="lazy"></figure>
<p>1.1 Master分支上的Commit都有对应的Tag。</p>
<p>1.2 Develop分支与Master分支是两个永久存在的分支，从公Master拉取Develop分支。</p>
<p>1.3 Develop分支不直接合并到Master分支，其通过Release分支合并到Master分支。</p>
<p>1.4 Master分支与线上版本保持一致。</p>
<p>1.5 Develop分支是自动构建分支，它总是保有当前即将发布或是已经发布的代码，是确定的下一次将要通过Release分支合并到master上的代码。</p>
<p><strong>2 临时分支Feature</strong></p>
<figure data-type="image" tabindex="2"><img src="https://pic2.zhimg.com/80/v2-c82cf2613a45c8eed6db16accf17cdf5_720w.jpg" alt="img" loading="lazy"></figure>
<p>2.1 当需要开发新的特性时，从Develop分支拉取Feature分支。</p>
<p>2.2 命名规范：</p>
<p>标准Git flow 认为Feature分支可以是，除以master, develop, release-, 和 hotfix-_ 开头的任何串。</p>
<p>在此我们规定，Feature分支命名规范以feat-开使。</p>
<p>2.3 生命周期：开发中存在，在合并到develop后或是丢弃后，便删除。</p>
<p>2.4 通常只在开发者的仓库中存在，origin中没有Feature分支。（不采纳这条限制，多人合作需要Feature上推到origin）</p>
<p>2.5 Feature分支做完后（做完是值完成了主体功能，完成了大部分测试与bug的修复，可以存在少量的非重要bug），确定为当前上线的版本后，便可合并回Develop, 合并完分支后一般会删点这个Feature分支，也可以保留。</p>
<p>到这里，一个Feature分支的生命周期便结束了。</p>
<p><strong>3 临时分支Release</strong></p>
<figure data-type="image" tabindex="3"><img src="https://pic1.zhimg.com/80/v2-c03412cb8e3ee3cb3c1670c4fadad814_720w.jpg" alt="img" loading="lazy"></figure>
<p>Release分支基于Develop分支创建，可以在Release分支上测试，修改Bug等。</p>
<p>同时，其它开发人员可以基于Develop开发新的Feature (记住：一旦打了Release分支之后不要从Develop分支上合并新的改动到Release分支)</p>
<p>发布Release分支时，合并Release到Master和Develop， 同时在Master分支上打个Tag记住Release版本号，删除Release分支。</p>
<p><strong>4 临时分支hotfix</strong></p>
<figure data-type="image" tabindex="4"><img src="https://pic4.zhimg.com/80/v2-a3a14bd5fde6f1eb79da04337a835b9b_720w.jpg" alt="img" loading="lazy"></figure>
<p>hotfix分支基于Master分支创建，开发完后需要合并回Master和Develop分支，同时在Master上打一个tag</p>
<p><strong>Git Flow 抽象模型</strong></p>
<p>在使用的过程中一定要注意到数据流的流动方向。</p>
<p>下面给出Git Flow 的抽象模型，让大家能更加直观的把握、灵活的运用于实践中。</p>
<figure data-type="image" tabindex="5"><img src="https://pic3.zhimg.com/80/v2-dd1f84f01b850dbbf744447522713f6a_720w.jpg" alt="img" loading="lazy"></figure>
<p><strong>Feature分支流程</strong></p>
<p>1 当有新的特性需要开发时，从Develop分支拉取Feature分支。</p>
<p>2 Feature分支在经过开发、测试后，确定为当前即将发布版本之后，便可合并到Develop分支，并删除Feature分支。</p>
<p>3 向Develop分支合并后，创建对应的Release分支，这可以对应一个或是多个Feature。</p>
<p>4 在Release上完成次要bug修复、发版配置等之后，便可合并到Develop与Master（Master上的合并需要加上tag）。</p>
<p><strong>hotfix分支流程 与 release分支流程</strong></p>
<p>1 它们都具有两个合并分支，Develop分支与Master分支。</p>
<p>2 hotfix拉取于Master分支。</p>
<p>3 release拉取于Develop分支。</p>
<p>4 hotfix是为解决线上严重问题而生。</p>
<p>5 release是为特性发布、工程配置、少量bug测试等问题而生。</p>
<p><strong>release过后常规bug修复</strong></p>
<p>release发布前，该特性引入的常规bug是在其上修改的。</p>
<p>对于release发布后，或是其它特性引入的bug，我们引入以&quot;bugfix-&quot;为开头的新特性。</p>
<p>至此我们基本遵守了标准 Git Flow 开发模型。</p>
<p>做了一个扩充：引入以&quot;bugfix-&quot;为开头的新特性，支持release发布后在Develop上发现的bug常规bug。</p>
<p>做了一个限制：Feature分支命名规范以“feat-”开始。</p>
<p><strong>完整的数据流图与命名规范</strong></p>
<figure data-type="image" tabindex="6"><img src="https://pic1.zhimg.com/80/v2-f00ca28403bc0e3a9fab628d61bf26f0_720w.jpg" alt="img" loading="lazy"></figure>
<p>格式： prename_postname</p>
<p>如 hotfix-5.11 , feat-5.11 , release-5.11 （5.11 为版本或是特性名称）</p>
<p>bugfix-图片上传（针对功能命名） ， bugfix-5.11 （针对某版本或是特性命名）</p>
<p><strong>master分支</strong></p>
<p>master是项目第一个被创建的分支。</p>
<p>每一个向master的合并，都对应一个经过严格测试的主观稳定的线上版本。</p>
<p>它是hotfix-分支的上游分支。</p>
<p><strong>hotfix-分支</strong></p>
<p>当线上版本出现严重的bug时，需要从master上选取特定的tag拉取代码。</p>
<p>在完成测试具备上线条件后，在hotfix-分支上完成版本的发布。</p>
<p>经灰度发布后，先合并到master，再合并到develop分支。</p>
<p>这两个合并步骤是不可分的，是一个事务。亦可称为同时合并到master分支和develop分支。</p>
<p><strong>develop分支</strong></p>
<p>develop分支在git flow 中承担了最为复杂与重要的任务。</p>
<p>它是feat-分支、release-分支，和bugfix-分支的起点。</p>
<p>是代码的同步中心，其它任何分支，都是经过develop分支完成代码同步的。</p>
<p><strong>feat-分支</strong></p>
<p>feat-分支是研发分支，源于develop分支，终于develop分支。</p>
<p>在feat-分支完成所有的新功能研发，多少bug的修复与优化工作。</p>
<p>在确定为会在下一个版本发布时，便可以合并到develop分支。</p>
<p>在develop分支上有一个或是多个合并的未上线的feat-分支时，可以选择拉取release-分支，进入release阶段。</p>
<p><strong>release-分支</strong></p>
<p>release-分支承载了发布中项目的配置，一定bug的修复，优化等工作。</p>
<p>创建release-分支有两个目的：</p>
<p>尽快向develop分支合并确定的下版feat-分支，极大的提高了研发的并发度；</p>
<p>经测试、发布、审核，进入灰度后，直到确定为不再回滚正式发布后，合并到master与develop分支。</p>
<p>它维护了长时间窗口等待期，确保master与线上版本的一致。</p>
<p><strong>bugfix-分支</strong></p>
<p>可被视为特殊的feat-分支。</p>
<p>⚠️⚠️⚠️分支操作注意事项</p>
<p><a href="https://zhuanlan.zhihu.com/p/29682134">KenChoi：为什么你应该停止使用 Git rebase 命令</a></p>
<p>只能对自己的私有分支做rebase操作。</p>
<p>凡涉及到几大共有分支（master, develop, release-, hotfix-_和 bugfix-）上的commit的合并,</p>
<p>必须使用merge，禁止使用rebase。严格禁止共有分支上的提交id变更。</p>
<p>其它分支可以使用rebase，合并到develop分支，但是只要提交到了develop，</p>
<p>所有的commit就属于develop分支，禁止再使用rebase操作。</p>
<p>问题：你好,我最近在尝试使用 git-flow 有一个问题我一直没有找到答案,问题: 在开发分支中开发完的功能在当前发布版本是不需要发布出去,不知道你有没有合适的处理方案,谢谢</p>
<p>单独拉出来一个分支，把目前不需要的提交用rebase删除 git rebase-i</p>

          
          <p class="next-post">下一篇：
            <a href="https://jwangkun.github.io/YB4KhpwZE/">
              <span class="post-title">
                 Docker 部署 Gitlab&rarr;
              </span>
            </a>
          </p>
        
        <div class="comment">
          
        </div>
      </div>
    </div>
  </article>
 <!-- Footer -->
  <footer>
    <div class="container">
      <div class="row">
        <div class="col-lg-8 col-md-10 mx-auto">
          <ul class="list-inline text-center">
            
            
              
            
              
            
              
            
              
            
              
            
              
            
              
              <li class="list-inline-item">
              <a href="https://jwangkun.github.io/atom.xml" target="_blank">
                <span class="fa-stack fa-lg">
                  <i class="fas fa-circle fa-stack-2x"></i>
                  <i class="fas fa-rss fa-stack-1x fa-inverse"></i>
                </span>
              </a>
              </li>
          </ul>
          <p class="copyright text-muted">Copyright &copy;<span>John Wong&#39;s Blog</span><br><a href="https://github.com/getgridea/gridea" class="Themeinfo">Powered by Gridea</a></p>
        </div>
      </div>
    </div>
   </footer>
  <!-- Bootstrap core JavaScript -->
  <script src="https://cdn.bootcss.com/twitter-bootstrap/4.3.1/js/bootstrap.bundle.min.js"></script>
  <!-- <script src="https://jwangkun.github.io/media/scripts/bootstrap.bundle.min.js"></script> -->
  <!-- Bootstrap core JavaScript -->
  <script src="https://cdn.jsdelivr.net/gh/Alanrk/clean-cdn@1.0/scripts/clean-blog.min.js"></script>
  <!-- <script src="https://jwangkun.github.io/media/scripts/clean-blog.min.js"></script> -->
  <script src="//instant.page/3.0.0" type="module" defer integrity="sha384-OeDn4XE77tdHo8pGtE1apMPmAipjoxUQ++eeJa6EtJCfHlvijigWiJpD7VDPWXV1"></script>
  <style type="text/css">a.back_to_top{text-decoration:none;position:fixed;bottom:40px;right:30px;background:#f0f0f0;height:40px;width:40px;border-radius:50%;line-height:36px;font-size:18px;text-align:center;transition-duration:.5s;transition-propety:background-color;display:none}a.back_to_top span{color:#888}a.back_to_top:hover{cursor:pointer;background:#dfdfdf}a.back_to_top:hover span{color:#555}@media print,screen and(max-width:580px){.back_to_top{display:none!important}}</style>
<a id="back_to_top" href="#" class="back_to_top">
  <span>▲</span></a>
<script>$(document).ready((function(_this) {
    return function() {
      var bt;
      bt = $('#back_to_top');
      if ($(document).width() > 480) {
        $(window).scroll(function() {
          var st;
          st = $(window).scrollTop();
          if (st > 30) {
            return bt.css('display', 'block')
          } else {
            return bt.css('display', 'none')
          }
        });
        return bt.click(function() {
          $('body,html').animate({
            scrollTop: 0
          },
          800);
          return false
        })
      }
    }
  })(this));
  var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?84ab85460bfbe79dbe5776a1df139a8f";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
  </script>
  
<script type="text/javascript" src="https://v1.cnzz.com/z_stat.php?id=1279350888&web_id=1279350888"></script>

  </body>
</html>

